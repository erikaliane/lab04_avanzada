<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" 
       integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">


      
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <style>
        form {background: rgba(229, 232, 233, 0.15); 
            padding: 0.25rem; position: fixed; bottom: 0; left:0; right: 0;
            display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px);
        }
        ul {list-style-type: none; margin: 3; padding: 0 ;  background: #e0e3e7;}
        ul > li {padding: 1.5rem 1rem;}
        ul > li:nth-child(odd) {
           
            background: #091a30;
            color: aliceblue;
            text-align: right;
            font-style: italic;
            font-weight: 600;
        }
    </style>
       
       
    <title>Mi Chat con Node</title>
   
  </head>
  <body>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    
    



<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
      <div class="col-lg-12">
          <div class="ibox float-e-margins">
              <div class="ibox-content">

                  <strong>Chat room </strong>

              </div>
          </div>
      </div>
  </div>
  <div class="row">
      <div class="col-lg-12">

              <div class="ibox chat-view">

                  


                  <div class="ibox-content">

                      <div class="row">

                          <div class="col-md-9 ">
                              <div class="chat-discussion">

                                  
                                 
                                  
                                  <div class="chat-message left">
                                    
                                            <ul class="list-group"></ul>
                                         
                                     
                                  </div>

                                  
                                  

                              </div>

                          </div>


                          
                          <div class="col-md-3">
                              <div class="chat-users">


                                  <div class="users-list">
                                      <div class="chat-user">
                                          <img class="chat-avatar" src="img/a4.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Karl Jordan</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <img class="chat-avatar" src="img/a1.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Monica Smith</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <span class="pull-right label label-primary">Online</span>
                                          <img class="chat-avatar" src="img/a2.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Michael Smith</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <span class="pull-right label label-primary">Online</span>
                                          <img class="chat-avatar" src="img/a3.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Janet Smith</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <img class="chat-avatar" src="img/a5.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Alice Smith</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <img class="chat-avatar" src="img/a6.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Monica Cale</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <img class="chat-avatar" src="img/a2.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Mark Jordan</a>
                                          </div>
                                      </div>
                                      <div class="chat-user">
                                          <span class="pull-right label label-primary">Online</span>
                                          <img class="chat-avatar" src="img/a3.jpg" alt="" >
                                          <div class="chat-user-name">
                                              <a href="#">Janet Smith</a>
                                          </div>
                                      </div>


                                  </div>

                              </div>
                          </div>

                      </div>
                      <div class="row">
                          <div class="col-lg-12">
                              <div class="chat-message-form">

                                  <div class="form-group">

                                    
                                    <form action="">
                                        <input type="text" class="form-control" placeholder="Ingrese Mensaje">
                                        <button
                                        class="btn btn-primary" >Enviar
                                        </button>
                                    </form>
                                  </div>

                              </div>
                          </div>
                      </div>


                  </div>

              </div>
      </div>

  </div>


</div>


</div>
 
<script src="/socket.io/socket.io.js"></script>

    <script>
        let socket = io()
        // referenciamos a los elementos de DOM
        const form = document.querySelector('form')
        const input = document.querySelector('input')
        let mensajes = document.querySelector('ul')

        form.addEventListener('submit', (e) => {
            e.preventDefault()
            if(input.value){
                socket.emit('chat', input.value)
                input.value = ''
            }
        })

        socket.on('chat', (msg) => {
            let item = document.createElement('li')
            item.textContent = msg
            mensajes.appendChild(item)
            window.scrollTo(0, document.body.scrollHeight)
        })
    </script>



  </body>
</html>